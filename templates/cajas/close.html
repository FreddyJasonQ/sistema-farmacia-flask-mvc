{% extends "base.html" %}

{% block title %}Cerrar Caja: {{ caja.descripcion }}{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header-unified">
    <h2 class="mb-0"><i class="bi bi-lock me-2"></i>Cerrar Caja: {{ caja.descripcion }}</h2>
  </div>
  
  <div class="card-body">
    <form method="POST" action="{{ url_for('caja.close', id=caja.id) }}" class="form-unified">
      <div class="content-card mb-4">
        <h5 class="medical-title"><i class="bi bi-cash-stack"></i> Resumen de Caja</h5>
        <div class="row mb-4">
          <div class="col-md-6 mb-3">
            <label class="form-label fw-bold">Descripción</label>
            <input type="text" class="form-control" value="{{ caja.descripcion }}" readonly>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label fw-bold">Total Teórico</label>
            <input type="text" class="form-control bg-light-blue fw-bold" 
                   value="S/ {{ "{:,.2f}".format(total_teorico) }}" readonly>
          </div>
        </div>
      </div>

      <div class="content-card mb-4">
        <h5 class="medical-title"><i class="bi bi-currency-exchange"></i> Monto de Cierre</h5>
        <div class="input-group">
          <span class="input-group-text">S/</span>
          <input type="number" step="0.01" min="0" class="form-control" 
                 name="monto_cierre" required placeholder="Monto real en caja">
        </div>
        <div class="form-text mt-2">
          Ingrese el monto físico contado en la caja
        </div>
      </div>

      <div class="d-flex justify-content-end mt-4">
        <a href="{{ url_for('caja.index') }}" class="btn btn-outline-secondary me-2">Cancelar</a>
        <button type="submit" class="btn btn-warning">
          <i class="bi bi-lock me-1"></i> Cerrar Caja
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}